#!/bin/bash

echo "**********************************************************************************************************"
echo "Starting unit test!"
echo "**********************************************************************************************************"

cd ..

echo "**********************************************************************************************************"
python data/equifold_process_input.py -c unit_test/config.ini

echo "**********************************************************************************************************"
echo "equifold_process_input.py worked fine!"

echo "**********************************************************************************************************"
echo "**********************************************************************************************************"

python data/train_val_test_split.py -c unit_test/config.ini
echo "**********************************************************************************************************"
echo "train_val_test_split.py worked fine!"

echo "**********************************************************************************************************"
echo "**********************************************************************************************************"

python run_training.py -c unit_test/config.ini
echo "**********************************************************************************************************"
echo "run_training.py worked fine!"

echo "**********************************************************************************************************"
echo "**********************************************************************************************************"

python run_inference.py -c unit_test/config.ini
echo "**********************************************************************************************************"
echo "run_inference.py worked fine!"

echo "**********************************************************************************************************"
echo "**********************************************************************************************************"

python run_inference_parallel.py -c unit_test/config.ini
echo "**********************************************************************************************************"
echo "run_inference_parallel.py worked fine!"

echo "**********************************************************************************************************"
echo "**********************************************************************************************************"

python benchmarking/benchmark_model.py -c unit_test/config.ini
echo "**********************************************************************************************************"
echo "benchmark_model.py worked fine!"

echo "**********************************************************************************************************"
echo "**********************************************************************************************************"

rm -r unit_test/logs
rm -r unit_test/predicted
rm -r unit_test/*pickle

echo "Unit test completed successfully!"
echo "**********************************************************************************************************"
